/*!
 * @pixi/extract - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
this.PIXI=this.PIXI||{};var _pixi_extract=function(e,t,r,n){"use strict";var a=new r.Rectangle,i=function(){function e(e){this.renderer=e}return e.prototype.image=function(e,t,r){var n=new Image;return n.src=this.base64(e,t,r),n},e.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},e.prototype.canvas=function(r){var i,o,s,d=this.renderer,h=!1,u=!1;r&&(r instanceof n.RenderTexture?s=r:(s=this.renderer.generateTexture(r),u=!0)),s?(i=s.baseTexture.resolution,o=s.frame,h=!1,d.renderTexture.bind(s)):(i=this.renderer.resolution,h=!0,(o=a).width=this.renderer.width,o.height=this.renderer.height,d.renderTexture.bind(null));var c=Math.floor(o.width*i+1e-4),x=Math.floor(o.height*i+1e-4),l=new t.CanvasRenderTarget(c,x,1),g=new Uint8Array(4*c*x),v=d.gl;v.readPixels(o.x*i,o.y*i,c,x,v.RGBA,v.UNSIGNED_BYTE,g);var f=l.context.getImageData(0,0,c,x);if(e.arrayPostDivide(g,f.data),l.context.putImageData(f,0,0),h){var I=new t.CanvasRenderTarget(l.width,l.height,1);I.context.scale(1,-1),I.context.drawImage(l.canvas,0,-x),l.destroy(),l=I}return u&&s.destroy(!0),l.canvas},e.prototype.pixels=function(t){var r,i,o,s=this.renderer,d=!1;t&&(t instanceof n.RenderTexture?o=t:(o=this.renderer.generateTexture(t),d=!0)),o?(r=o.baseTexture.resolution,i=o.frame,s.renderTexture.bind(o)):(r=s.resolution,(i=a).width=s.width,i.height=s.height,s.renderTexture.bind(null));var h=i.width*r,u=i.height*r,c=new Uint8Array(4*h*u),x=s.gl;return x.readPixels(i.x*r,i.y*r,h,u,x.RGBA,x.UNSIGNED_BYTE,c),d&&o.destroy(!0),e.arrayPostDivide(c,c),c},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var n=t[r+3]=e[r+3];0!==n?(t[r]=Math.round(Math.min(255*e[r]/n,255)),t[r+1]=Math.round(Math.min(255*e[r+1]/n,255)),t[r+2]=Math.round(Math.min(255*e[r+2]/n,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}},e}();return e.Extract=i,Object.defineProperty(e,"__esModule",{value:!0}),e}({},PIXI.utils,PIXI,PIXI);Object.assign(this.PIXI,_pixi_extract);
//# sourceMappingURL=extract.min.js.map
