/*!
 * @pixi/extract - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@pixi/utils"),r=require("@pixi/math"),t=require("@pixi/core"),n=new r.Rectangle,a=function(){function r(e){this.renderer=e}return r.prototype.image=function(e,r,t){var n=new Image;return n.src=this.base64(e,r,t),n},r.prototype.base64=function(e,r,t){return this.canvas(e).toDataURL(r,t)},r.prototype.canvas=function(a){var i,o,s,d=this.renderer,h=!1,u=!1;a&&(a instanceof t.RenderTexture?s=a:(s=this.renderer.generateTexture(a),u=!0)),s?(i=s.baseTexture.resolution,o=s.frame,h=!1,d.renderTexture.bind(s)):(i=this.renderer.resolution,h=!0,(o=n).width=this.renderer.width,o.height=this.renderer.height,d.renderTexture.bind(null));var c=Math.floor(o.width*i+1e-4),x=Math.floor(o.height*i+1e-4),l=new e.CanvasRenderTarget(c,x,1),g=new Uint8Array(4*c*x),v=d.gl;v.readPixels(o.x*i,o.y*i,c,x,v.RGBA,v.UNSIGNED_BYTE,g);var p=l.context.getImageData(0,0,c,x);if(r.arrayPostDivide(g,p.data),l.context.putImageData(p,0,0),h){var f=new e.CanvasRenderTarget(l.width,l.height,1);f.context.scale(1,-1),f.context.drawImage(l.canvas,0,-x),l.destroy(),l=f}return u&&s.destroy(!0),l.canvas},r.prototype.pixels=function(e){var a,i,o,s=this.renderer,d=!1;e&&(e instanceof t.RenderTexture?o=e:(o=this.renderer.generateTexture(e),d=!0)),o?(a=o.baseTexture.resolution,i=o.frame,s.renderTexture.bind(o)):(a=s.resolution,(i=n).width=s.width,i.height=s.height,s.renderTexture.bind(null));var h=i.width*a,u=i.height*a,c=new Uint8Array(4*h*u),x=s.gl;return x.readPixels(i.x*a,i.y*a,h,u,x.RGBA,x.UNSIGNED_BYTE,c),d&&o.destroy(!0),r.arrayPostDivide(c,c),c},r.prototype.destroy=function(){this.renderer=null},r.arrayPostDivide=function(e,r){for(var t=0;t<e.length;t+=4){var n=r[t+3]=e[t+3];0!==n?(r[t]=Math.round(Math.min(255*e[t]/n,255)),r[t+1]=Math.round(Math.min(255*e[t+1]/n,255)),r[t+2]=Math.round(Math.min(255*e[t+2]/n,255))):(r[t]=e[t],r[t+1]=e[t+1],r[t+2]=e[t+2])}},r}();exports.Extract=a;
//# sourceMappingURL=extract.min.js.map
